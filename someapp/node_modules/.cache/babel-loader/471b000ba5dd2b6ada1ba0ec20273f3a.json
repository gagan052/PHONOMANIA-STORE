{"ast":null,"code":"var _jsxFileName = \"/Users/gagan/Desktop/sanjeev/someapp/src/components/Cart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport './Cart.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Cart = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const [cartItems, setCartItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    fetchCart();\n  }, []);\n\n  const fetchCart = async () => {\n    try {\n      const token = localStorage.getItem('token');\n\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      const response = await fetch('http://localhost:8080/api/cart', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch cart');\n      }\n\n      const data = await response.json();\n      setCartItems(data.items || []);\n    } catch (error) {\n      setError('Failed to load cart. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateQuantity = async (productId, change) => {\n    try {\n      const token = localStorage.getItem('token');\n\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      const item = cartItems.find(item => item.product._id === productId);\n      const newQuantity = Math.max(1, item.quantity + change);\n      const response = await fetch(`http://localhost:8080/api/cart/update/${productId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          quantity: newQuantity\n        })\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || 'Failed to update quantity');\n      }\n\n      const updatedCart = await response.json();\n      setCartItems(updatedCart.items || []);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  const removeItem = async productId => {\n    try {\n      const token = localStorage.getItem('token');\n\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      const response = await fetch(`http://localhost:8080/api/cart/remove/${productId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || 'Failed to remove item');\n      }\n\n      const updatedCart = await response.json();\n      setCartItems(updatedCart.items || []);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  const calculateSubtotal = () => {\n    return cartItems.reduce((total, item) => total + item.price * item.quantity, 0);\n  };\n\n  const subtotal = calculateSubtotal();\n  const shipping = subtotal >= 200 ? 0 : 10;\n  const total = subtotal + shipping;\n  const remainingForFreeShipping = Math.max(0, 200 - subtotal);\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-container\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"cart-title\",\n        children: \"Loading cart...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"cart-title\",\n        children: \"Error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"continue-shopping\",\n        onClick: fetchCart,\n        children: \"Try Again\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"cart-title\",\n      children: \"Your Shopping Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), cartItems.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-items\",\n        children: /*#__PURE__*/_jsxDEV(AnimatePresence, {\n          children: cartItems.map(item => /*#__PURE__*/_jsxDEV(motion.div, {\n            className: \"cart-item\",\n            initial: {\n              opacity: 0,\n              y: 20\n            },\n            animate: {\n              opacity: 1,\n              y: 0\n            },\n            exit: {\n              opacity: 0,\n              y: -20\n            },\n            transition: {\n              duration: 0.3\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-image-container\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: item.product.image,\n                alt: item.product.name,\n                className: \"item-image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: item.product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"item-description\",\n                children: item.product.description || 'No description available'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item-price-quantity\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"item-price\",\n                  children: [\"$\", item.price.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"quantity-controls\",\n                  children: [/*#__PURE__*/_jsxDEV(motion.button, {\n                    whileTap: {\n                      scale: 0.95\n                    },\n                    onClick: () => updateQuantity(item.product._id, -1),\n                    className: \"quantity-btn\",\n                    disabled: item.quantity <= 1,\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-minus\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"quantity\",\n                    children: item.quantity\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n                    whileTap: {\n                      scale: 0.95\n                    },\n                    onClick: () => updateQuantity(item.product._id, 1),\n                    className: \"quantity-btn\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-plus\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-total\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"total-price\",\n                children: [\"$\", (item.price * item.quantity).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n                whileHover: {\n                  scale: 1.05\n                },\n                whileTap: {\n                  scale: 0.95\n                },\n                onClick: () => removeItem(item.product._id),\n                className: \"remove-btn\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-trash-alt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 23\n                }, this), \" Remove\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 19\n            }, this)]\n          }, item.product._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"cart-summary\",\n        initial: {\n          opacity: 0,\n          x: 20\n        },\n        animate: {\n          opacity: 1,\n          x: 0\n        },\n        transition: {\n          duration: 0.3\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-shopping-cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 17\n          }, this), \" Order Summary\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), remainingForFreeShipping > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shipping-progress\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-truck\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 19\n            }, this), \"Add $\", remainingForFreeShipping.toFixed(2), \" more for free shipping!\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar\",\n            children: /*#__PURE__*/_jsxDEV(motion.div, {\n              className: \"progress-fill\",\n              initial: {\n                width: 0\n              },\n              animate: {\n                width: `${subtotal / 200 * 100}%`\n              },\n              transition: {\n                duration: 0.5\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-receipt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 23\n              }, this), \" Subtotal\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"$\", subtotal.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-shipping-fast\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 23\n              }, this), \" Shipping\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: shipping === 0 ? 'Free' : `$${shipping.toFixed(2)}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-row total\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-money-bill-wave\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 23\n              }, this), \" Total\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"$\", total.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n          className: \"checkout-btn\",\n          whileHover: {\n            scale: 1.02\n          },\n          whileTap: {\n            scale: 0.98\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-lock\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this), \" Secure Checkout\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty-cart\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Your cart is empty\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Add some products to your cart to see them here!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"continue-shopping\",\n        children: \"Continue Shopping\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Cart, \"zswFxl5KWTIyKkHxkSEtkKpDWQ8=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["/Users/gagan/Desktop/sanjeev/someapp/src/components/Cart.js"],"names":["React","useState","useEffect","useNavigate","motion","AnimatePresence","Cart","navigate","cartItems","setCartItems","loading","setLoading","error","setError","fetchCart","token","localStorage","getItem","response","fetch","headers","ok","Error","data","json","items","updateQuantity","productId","change","item","find","product","_id","newQuantity","Math","max","quantity","method","body","JSON","stringify","message","updatedCart","removeItem","calculateSubtotal","reduce","total","price","subtotal","shipping","remainingForFreeShipping","length","map","opacity","y","duration","image","name","description","toFixed","scale","x","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport './Cart.css';\n\nconst Cart = () => {\n  const navigate = useNavigate();\n  const [cartItems, setCartItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    fetchCart();\n  }, []);\n\n  const fetchCart = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      const response = await fetch('http://localhost:8080/api/cart', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch cart');\n      }\n\n      const data = await response.json();\n      setCartItems(data.items || []);\n    } catch (error) {\n      setError('Failed to load cart. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateQuantity = async (productId, change) => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      const item = cartItems.find(item => item.product._id === productId);\n      const newQuantity = Math.max(1, item.quantity + change);\n\n      const response = await fetch(`http://localhost:8080/api/cart/update/${productId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ quantity: newQuantity })\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || 'Failed to update quantity');\n      }\n\n      const updatedCart = await response.json();\n      setCartItems(updatedCart.items || []);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  const removeItem = async (productId) => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      const response = await fetch(`http://localhost:8080/api/cart/remove/${productId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || 'Failed to remove item');\n      }\n\n      const updatedCart = await response.json();\n      setCartItems(updatedCart.items || []);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  const calculateSubtotal = () => {\n    return cartItems.reduce((total, item) => total + (item.price * item.quantity), 0);\n  };\n\n  const subtotal = calculateSubtotal();\n  const shipping = subtotal >= 200 ? 0 : 10;\n  const total = subtotal + shipping;\n  const remainingForFreeShipping = Math.max(0, 200 - subtotal);\n\n  if (loading) {\n    return (\n      <div className=\"cart-container\">\n        <h1 className=\"cart-title\">Loading cart...</h1>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"cart-container\">\n        <h1 className=\"cart-title\">Error</h1>\n        <p className=\"error-message\">{error}</p>\n        <button className=\"continue-shopping\" onClick={fetchCart}>Try Again</button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"cart-container\">\n      <h1 className=\"cart-title\">Your Shopping Cart</h1>\n      \n      {cartItems.length > 0 ? (\n        <div className=\"cart-content\">\n          <div className=\"cart-items\">\n            <AnimatePresence>\n              {cartItems.map(item => (\n                <motion.div\n                  key={item.product._id}\n                  className=\"cart-item\"\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -20 }}\n                  transition={{ duration: 0.3 }}\n                >\n                  <div className=\"item-image-container\">\n                    <img src={item.product.image} alt={item.product.name} className=\"item-image\" />\n                  </div>\n                  <div className=\"item-details\">\n                    <h3>{item.product.name}</h3>\n                    <p className=\"item-description\">{item.product.description || 'No description available'}</p>\n                    <div className=\"item-price-quantity\">\n                      <p className=\"item-price\">${item.price.toFixed(2)}</p>\n                      <div className=\"quantity-controls\">\n                        <motion.button\n                          whileTap={{ scale: 0.95 }}\n                          onClick={() => updateQuantity(item.product._id, -1)}\n                          className=\"quantity-btn\"\n                          disabled={item.quantity <= 1}\n                        >\n                          <i className=\"fas fa-minus\"></i>\n                        </motion.button>\n                        <span className=\"quantity\">{item.quantity}</span>\n                        <motion.button\n                          whileTap={{ scale: 0.95 }}\n                          onClick={() => updateQuantity(item.product._id, 1)}\n                          className=\"quantity-btn\"\n                        >\n                          <i className=\"fas fa-plus\"></i>\n                        </motion.button>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"item-total\">\n                    <p className=\"total-price\">${(item.price * item.quantity).toFixed(2)}</p>\n                    <motion.button\n                      whileHover={{ scale: 1.05 }}\n                      whileTap={{ scale: 0.95 }}\n                      onClick={() => removeItem(item.product._id)}\n                      className=\"remove-btn\"\n                    >\n                      <i className=\"fas fa-trash-alt\"></i> Remove\n                    </motion.button>\n                  </div>\n                </motion.div>\n              ))}\n            </AnimatePresence>\n          </div>\n\n          <motion.div\n            className=\"cart-summary\"\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ duration: 0.3 }}\n          >\n            <h2><i className=\"fas fa-shopping-cart\"></i> Order Summary</h2>\n            {remainingForFreeShipping > 0 && (\n              <div className=\"shipping-progress\">\n                <p>\n                  <i className=\"fas fa-truck\"></i>\n                  Add ${remainingForFreeShipping.toFixed(2)} more for free shipping!\n                </p>\n                <div className=\"progress-bar\">\n                  <motion.div\n                    className=\"progress-fill\"\n                    initial={{ width: 0 }}\n                    animate={{ width: `${(subtotal / 200) * 100}%` }}\n                    transition={{ duration: 0.5 }}\n                  ></motion.div>\n                </div>\n              </div>\n            )}\n            <div className=\"summary-details\">\n              <div className=\"summary-row\">\n                <span><i className=\"fas fa-receipt\"></i> Subtotal</span>\n                <span>${subtotal.toFixed(2)}</span>\n              </div>\n              <div className=\"summary-row\">\n                <span><i className=\"fas fa-shipping-fast\"></i> Shipping</span>\n                <span>{shipping === 0 ? 'Free' : `$${shipping.toFixed(2)}`}</span>\n              </div>\n              <div className=\"summary-row total\">\n                <span><i className=\"fas fa-money-bill-wave\"></i> Total</span>\n                <span>${total.toFixed(2)}</span>\n              </div>\n            </div>\n            <motion.button\n              className=\"checkout-btn\"\n              whileHover={{ scale: 1.02 }}\n              whileTap={{ scale: 0.98 }}\n            >\n              <i className=\"fas fa-lock\"></i> Secure Checkout\n            </motion.button>\n          </motion.div>\n        </div>\n      ) : (\n        <div className=\"empty-cart\">\n          <h2>Your cart is empty</h2>\n          <p>Add some products to your cart to see them here!</p>\n          <button className=\"continue-shopping\">Continue Shopping</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Cart;"]},"metadata":{},"sourceType":"module"}