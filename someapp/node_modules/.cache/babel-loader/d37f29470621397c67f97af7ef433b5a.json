{"ast":null,"code":"var _jsxFileName = \"/Users/gagan/Desktop/sanjeev/someapp/src/components/Cart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Cart.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Cart = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const [cartItems, setCartItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    fetchCart();\n  }, []);\n\n  const fetchCart = async () => {\n    try {\n      const token = localStorage.getItem('token');\n\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      const response = await fetch('http://localhost:8080/api/cart', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch cart');\n      }\n\n      const data = await response.json();\n      setCartItems(data.items || []);\n    } catch (error) {\n      setError('Failed to load cart. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateQuantity = async (productId, change) => {\n    try {\n      const token = localStorage.getItem('token');\n\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      const item = cartItems.find(item => item.product._id === productId);\n      const newQuantity = Math.max(1, item.quantity + change);\n      const response = await fetch(`http://localhost:8080/api/cart/update/${productId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          quantity: newQuantity\n        })\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || 'Failed to update quantity');\n      }\n\n      const updatedCart = await response.json();\n      setCartItems(updatedCart.items || []);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  const removeItem = async productId => {\n    try {\n      const token = localStorage.getItem('token');\n\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      const response = await fetch(`http://localhost:8080/api/cart/remove/${productId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || 'Failed to remove item');\n      }\n\n      const updatedCart = await response.json();\n      setCartItems(updatedCart.items || []);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  const calculateSubtotal = () => {\n    return cartItems.reduce((total, item) => total + item.price * item.quantity, 0);\n  };\n\n  const subtotal = calculateSubtotal();\n  const shipping = subtotal >= 200 ? 0 : 10;\n  const total = subtotal + shipping;\n  const remainingForFreeShipping = Math.max(0, 200 - subtotal);\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-container\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"cart-title\",\n        children: \"Loading cart...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"cart-title\",\n        children: \"Error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"continue-shopping\",\n        onClick: fetchCart,\n        children: \"Try Again\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"cart-title\",\n      children: \"Your Shopping Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), cartItems.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-items\",\n        children: cartItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-item fade-in\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"item-image-container\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.product.image,\n              alt: item.product.name,\n              className: \"item-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"item-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: item.product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"item-description\",\n              children: item.product.description || 'No description available'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-price-quantity\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"item-price\",\n                children: [\"$\", item.price.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"quantity-controls\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => updateQuantity(item.product._id, -1),\n                  className: \"quantity-btn\",\n                  disabled: item.quantity <= 1,\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-minus\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 154,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"quantity\",\n                  children: item.quantity\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => updateQuantity(item.product._id, 1),\n                  className: \"quantity-btn\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-plus\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"item-total\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"total-price\",\n              children: [\"$\", (item.price * item.quantity).toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeItem(item.product._id),\n              className: \"remove-btn\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-trash-alt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 23\n              }, this), \" Remove\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 19\n          }, this)]\n        }, item.product._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-summary fade-in\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-shopping-cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 17\n          }, this), \" Order Summary\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this), remainingForFreeShipping > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shipping-progress\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-truck\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 19\n            }, this), \"Add $\", remainingForFreeShipping.toFixed(2), \" more for free shipping!\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-fill\",\n              style: {\n                width: `${subtotal / 200 * 100}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-receipt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 23\n              }, this), \" Subtotal\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"$\", subtotal.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-shipping-fast\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 23\n              }, this), \" Shipping\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: shipping === 0 ? 'Free' : `$${shipping.toFixed(2)}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-row total\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-money-bill-wave\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 23\n              }, this), \" Total\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"$\", total.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"checkout-btn\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-lock\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this), \" Secure Checkout\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty-cart\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Your cart is empty\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Add some products to your cart to see them here!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"continue-shopping\",\n        children: \"Continue Shopping\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Cart, \"zswFxl5KWTIyKkHxkSEtkKpDWQ8=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["/Users/gagan/Desktop/sanjeev/someapp/src/components/Cart.js"],"names":["React","useState","useEffect","useNavigate","Cart","navigate","cartItems","setCartItems","loading","setLoading","error","setError","fetchCart","token","localStorage","getItem","response","fetch","headers","ok","Error","data","json","items","updateQuantity","productId","change","item","find","product","_id","newQuantity","Math","max","quantity","method","body","JSON","stringify","message","updatedCart","removeItem","calculateSubtotal","reduce","total","price","subtotal","shipping","remainingForFreeShipping","length","map","image","name","description","toFixed","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Cart.css';\n\nconst Cart = () => {\n  const navigate = useNavigate();\n  const [cartItems, setCartItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    fetchCart();\n  }, []);\n\n  const fetchCart = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      const response = await fetch('http://localhost:8080/api/cart', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch cart');\n      }\n\n      const data = await response.json();\n      setCartItems(data.items || []);\n    } catch (error) {\n      setError('Failed to load cart. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateQuantity = async (productId, change) => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      const item = cartItems.find(item => item.product._id === productId);\n      const newQuantity = Math.max(1, item.quantity + change);\n\n      const response = await fetch(`http://localhost:8080/api/cart/update/${productId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ quantity: newQuantity })\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || 'Failed to update quantity');\n      }\n\n      const updatedCart = await response.json();\n      setCartItems(updatedCart.items || []);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  const removeItem = async (productId) => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      const response = await fetch(`http://localhost:8080/api/cart/remove/${productId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || 'Failed to remove item');\n      }\n\n      const updatedCart = await response.json();\n      setCartItems(updatedCart.items || []);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  const calculateSubtotal = () => {\n    return cartItems.reduce((total, item) => total + (item.price * item.quantity), 0);\n  };\n\n  const subtotal = calculateSubtotal();\n  const shipping = subtotal >= 200 ? 0 : 10;\n  const total = subtotal + shipping;\n  const remainingForFreeShipping = Math.max(0, 200 - subtotal);\n\n  if (loading) {\n    return (\n      <div className=\"cart-container\">\n        <h1 className=\"cart-title\">Loading cart...</h1>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"cart-container\">\n        <h1 className=\"cart-title\">Error</h1>\n        <p className=\"error-message\">{error}</p>\n        <button className=\"continue-shopping\" onClick={fetchCart}>Try Again</button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"cart-container\">\n      <h1 className=\"cart-title\">Your Shopping Cart</h1>\n      \n      {cartItems.length > 0 ? (\n        <div className=\"cart-content\">\n          <div className=\"cart-items\">\n            {cartItems.map(item => (\n                <div\n                  key={item.product._id}\n                  className=\"cart-item fade-in\"\n                >\n                  <div className=\"item-image-container\">\n                    <img src={item.product.image} alt={item.product.name} className=\"item-image\" />\n                  </div>\n                  <div className=\"item-details\">\n                    <h3>{item.product.name}</h3>\n                    <p className=\"item-description\">{item.product.description || 'No description available'}</p>\n                    <div className=\"item-price-quantity\">\n                      <p className=\"item-price\">${item.price.toFixed(2)}</p>\n                      <div className=\"quantity-controls\">\n                        <button\n                          onClick={() => updateQuantity(item.product._id, -1)}\n                          className=\"quantity-btn\"\n                          disabled={item.quantity <= 1}\n                        >\n                          <i className=\"fas fa-minus\"></i>\n                        </button>\n                        <span className=\"quantity\">{item.quantity}</span>\n                        <button\n                          onClick={() => updateQuantity(item.product._id, 1)}\n                          className=\"quantity-btn\"\n                        >\n                          <i className=\"fas fa-plus\"></i>\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"item-total\">\n                    <p className=\"total-price\">${(item.price * item.quantity).toFixed(2)}</p>\n                    <button\n                      onClick={() => removeItem(item.product._id)}\n                      className=\"remove-btn\"\n                    >\n                      <i className=\"fas fa-trash-alt\"></i> Remove\n                    </button>\n                  </div>\n                </div>\n              ))}\n          </div>\n\n          <div className=\"cart-summary fade-in\">\n            <h2><i className=\"fas fa-shopping-cart\"></i> Order Summary</h2>\n            {remainingForFreeShipping > 0 && (\n              <div className=\"shipping-progress\">\n                <p>\n                  <i className=\"fas fa-truck\"></i>\n                  Add ${remainingForFreeShipping.toFixed(2)} more for free shipping!\n                </p>\n                <div className=\"progress-bar\">\n                  <div\n                    className=\"progress-fill\"\n                    style={{ width: `${(subtotal / 200) * 100}%` }}\n                  ></div>\n                </div>\n              </div>\n            )}\n            <div className=\"summary-details\">\n              <div className=\"summary-row\">\n                <span><i className=\"fas fa-receipt\"></i> Subtotal</span>\n                <span>${subtotal.toFixed(2)}</span>\n              </div>\n              <div className=\"summary-row\">\n                <span><i className=\"fas fa-shipping-fast\"></i> Shipping</span>\n                <span>{shipping === 0 ? 'Free' : `$${shipping.toFixed(2)}`}</span>\n              </div>\n              <div className=\"summary-row total\">\n                <span><i className=\"fas fa-money-bill-wave\"></i> Total</span>\n                <span>${total.toFixed(2)}</span>\n              </div>\n            </div>\n            <button className=\"checkout-btn\">\n              <i className=\"fas fa-lock\"></i> Secure Checkout\n            </button>\n          </div>\n        </div>\n      ) : (\n        <div className=\"empty-cart\">\n          <h2>Your cart is empty</h2>\n          <p>Add some products to your cart to see them here!</p>\n          <button className=\"continue-shopping\">Continue Shopping</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Cart;"]},"metadata":{},"sourceType":"module"}